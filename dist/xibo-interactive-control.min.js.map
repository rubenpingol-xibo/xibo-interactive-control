{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/xibo-interactive-control.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","window","xiboIC","console","log","xiboICTargetId","_lib","protocol","hostName","port","headers","timelimit","callbackQueue","isVisible","isPreview","targetId","undefined","getOriginURL","this","makeRequest","path","_ref","arguments","length","type","data","done","error","parent","previewActionTrigger","status","responseText","urlToUse","typeToUse","reqHeaders","xhr","XMLHttpRequest","timeout","open","setRequestHeader","forEach","header","newData","_typeof","JSON","stringify","onload","send","mainLib","checkVisible","$","urlParam","results","RegExp","exec","location","href","decodeURI","checkIsPreview","URLSearchParams","searchParams","search","has","lD","config","_ref2","info","_ref3","trigger","code","_ref4","id","expireNow","_ref5","extendWidgetDuration","duration","_ref6","setWidgetDuration","_ref7","addToQueue","callback","_len","args","Array","_key","push","runQueue","element","apply","setVisible","lockTextSelection","append","appendTo","remove","lockContextMenu","attr","removeAttr","lockPinchZoom","lock","$viewPortEl","originalValue","lockAllInteractions","reportFault","_ref8","reason","_ref9","reportKey","ttl","set","widgetId","_len2","_key2"],"mappings":"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","file":"xibo-interactive-control.min.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./src/xibo-interactive-control.js\");\n","/**\n * Copyright (C) 2020 Xibo Signage Ltd\n *\n * Xibo - Digital Signage - http://www.xibo.org.uk\n *\n * This file is part of Xibo.\n *\n * Xibo is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * any later version.\n *\n * Xibo is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with Xibo.  If not, see <http://www.gnu.org/licenses/>.\n */\nwindow.xiboIC = (function() {\n  'use strict';\n  console.log({xiboICTargetId});\n  // Private vars\n  const _lib = {\n    protocol: '', // default protocol\n    hostName: '', // default URL\n    port: '', // default PORT\n    headers: [], // Default headers\n    timelimit: 5000, // timelimit in milliseconds\n    callbackQueue: [],\n    isVisible: true, // Widget visibility on the player\n    isPreview: false, // If the library is being used by a preview\n    targetId:\n      (typeof xiboICTargetId != 'undefined') ?\n        xiboICTargetId :\n        undefined, // target id\n\n    /**\n     * Get URL string\n     * @return {string} URL string\n     */\n    getOriginURL: function() {\n      if (this.protocol != '' && this.hostName != '') {\n        return this.protocol + '://' + this.hostName + ((this.port != '') ? ':' + this.port : '');\n      }\n      return '';\n    },\n\n    /**\n       * Make a request to the configured server/player\n       * @param  {string} path - Request path\n       * @param  {Object} [options] - Optional params\n       * @param  {string} [options.type]\n       * @param  {Object[]} [options.headers]\n       *  Request headers in the format {key: key, value: value}\n       * @param  {Object} [options.data]\n       * @param  {callback} [options.done]\n       * @param  {callback} [options.error]\n       */\n    makeRequest: function(path, {type, headers, data, done, error} = {}) {\n      const self = this;\n\n      // Preview\n      if (self.isPreview) {\n        // Call the preview action if it exists\n        if (typeof parent.previewActionTrigger == 'function') {\n          parent.previewActionTrigger(path, data, done);\n        } else {\n          // Stop the method to avoid a request\n          // but send a fake response\n          if (typeof(done) == 'function') {\n            done({\n              status: 200,\n              responseText: 'OK',\n            });\n          }\n        }\n\n        // Stop the method to avoid a request\n        return;\n      }\n\n      const urlToUse = self.getOriginURL() + path;\n      const typeToUse = (type) ? type : 'GET';\n      const reqHeaders = (headers) ? headers : self.headers;\n\n      // Init AJAX\n      const xhr = new XMLHttpRequest();\n      xhr.timeout = self.timelimit;\n\n      xhr.open(typeToUse, urlToUse, true);\n\n      // Set headers\n      if (type == 'POST') {\n        xhr.setRequestHeader('Content-Type', 'application/json;charset=UTF-8');\n      }\n\n      reqHeaders.forEach((header) => {\n        xhr.setRequestHeader(header.key, header.value);\n      });\n\n      // Append data\n      let newData = null;\n      if (typeof(data) == 'object') {\n        newData = JSON.stringify(data);\n      }\n\n      // On load complete\n      xhr.onload = function() {\n        if (xhr.status >= 200 && xhr.status <= 299) {\n          if (typeof(done) == 'function') {\n            done(this);\n          }\n        } else {\n          if (typeof(error) == 'function') {\n            error(this);\n          }\n        }\n      };\n\n      // Send!\n      xhr.send(newData);\n    },\n  };\n\n  // Public library\n  const mainLib = {\n    /**\n     * Check if the current widget is visible\n     * @return {boolean} Widget visibility\n     */\n    checkVisible: function() { // Check if the widget is hidden or visible\n      $.urlParam = function(name) {\n        const results =\n          new RegExp('[\\?&]' + name + '=([^&#]*)').exec(window.location.href);\n        if (results == null) {\n          return null;\n        } else {\n          return decodeURI(results[1]) || 0;\n        }\n      };\n\n      _lib.isVisible =\n        ($.urlParam('visible')) ? ($.urlParam('visible') == 1) : true;\n      return _lib.isVisible;\n    },\n\n    /**\n     * Check if we're running in a preview\n     * @return {boolean} Preview status\n     */\n    checkIsPreview: function() {\n      // If we don't have URLSearchParams defined, we're also in preview\n      if (typeof(URLSearchParams) === \"undefined\") {\n        _lib.isPreview = true;\n        return true;\n      }\n\n      // Check if we have the preview flag in URL\n      const searchParams = new URLSearchParams(window.location.search);\n      if (searchParams.has('preview') && searchParams.get('preview') == 1) {\n        _lib.isPreview = true;\n        return true;\n      }\n\n      // For the widget preview in viewer\n      if (\n        typeof window.parent.lD != 'undefined' ||\n        typeof window.parent.parent.lD != 'undefined'\n      ) {\n        _lib.isPreview = true;\n        return true;\n      }\n\n      return false;\n    },\n\n    /**\n       * Configure the library options\n       * @param  {Object} [options]\n       * @param  {string} [options.hostName]\n       * @param  {string} [options.port]\n       * @param  {Object[]} [options.headers]\n       *  Request headers in the format {key: key, value: value}\n       * @param  {string} [options.headers.key]\n       * @param  {string} [options.headers.value]\n       * @param  {string} [options.protocol]\n       */\n    config: function({hostName, port, headers, protocol} = {}) {\n      // Initialise custom request params\n      _lib.hostName = hostName ? hostName : _lib.hostName;\n      _lib.port = port ? port : _lib.port;\n      _lib.headers = headers ? headers : _lib.headers;\n      _lib.protocol = protocol ? protocol : _lib.protocol;\n    },\n\n    /**\n       * Get player info\n       * @param  {Object[]} [options] - Request options\n       * @param  {callback} [options.done]\n       * @param  {callback} [options.error]\n       */\n    info: function({done, error} = {}) {\n      _lib.makeRequest(\n        '/info',\n        {\n          done: done,\n          error: error,\n        },\n      );\n    },\n\n    /**\n       * Trigger a predefined action\n       * @param  {string} code - The trigger code\n       * @param  {string} [options.targetId] - target id\n       * @param  {Object[]} [options] - Request options\n       * @param  {callback} [options.done]\n       * @param  {callback} [options.error]\n       */\n    trigger(code, {targetId, done, error} = {}) {\n      // Get target id from the request option or from the global lib var\n      const id = (typeof targetId != 'undefined') ? targetId : _lib.targetId;\n\n      _lib.makeRequest(\n        '/trigger',\n        {\n          type: 'POST',\n          data: {\n            id: id,\n            trigger: code,\n          },\n          done: done,\n          error: error,\n        },\n      );\n    },\n\n    /**\n       * Expire widget\n       * @param  {Object[]} [options] - Request options\n       * @param  {string} [options.targetId] - target id\n       * @param  {callback} [options.done]\n       * @param  {callback} [options.error]\n       */\n    expireNow({targetId, done, error} = {}) {\n      // Get target id from the request option or from the global lib var\n      const id = (typeof targetId != 'undefined') ? targetId : _lib.targetId;\n\n      _lib.makeRequest(\n        '/duration/expire',\n        {\n          type: 'POST',\n          data: {\n            id: id,\n          },\n          done: done,\n          error: error,\n        },\n      );\n    },\n\n    /**\n       * Extend widget duration\n       * @param  {string} duration - Duration value to extend\n       * @param  {Object[]} [options] - Request options\n       * @param  {string} [options.targetId] - target id\n       * @param  {callback} [options.done]\n       * @param  {callback} [options.error]\n       */\n    extendWidgetDuration(duration, {targetId, done, error} = {}) {\n      // Get target id from the request option or from the global lib var\n      const id = (typeof targetId != 'undefined') ? targetId : _lib.targetId;\n\n      _lib.makeRequest(\n        '/duration/extend',\n        {\n          type: 'POST',\n          data: {\n            id: id,\n            duration: duration,\n          },\n          done: done,\n          error: error,\n        },\n      );\n    },\n\n    /**\n       * Set widget duration\n       * @param  {string} duration - New widget duration\n       * @param  {Object[]} [options] - Request options\n       * @param  {string} [options.targetId] - target id\n       * @param  {callback} [options.done]\n       * @param  {callback} [options.error]\n       */\n    setWidgetDuration(duration, {targetId, done, error} = {}) {\n      // Get target id from the request option or from the global lib var\n      const id = (typeof targetId != 'undefined') ? targetId : _lib.targetId;\n\n      _lib.makeRequest(\n        '/duration/set',\n        {\n          type: 'POST',\n          data: {\n            id: id,\n            duration: duration,\n          },\n          done: done,\n          error: error,\n        },\n      );\n    },\n\n    /**\n       * Add callback function to the queue\n       * @param  {callback} callback - Function to store\n       * @param  {Object[]} [args] - Function arguments\n       */\n    addToQueue(callback, ...args) {\n      if (typeof callback != 'function') {\n        console.error('Invalid callback function');\n      }\n\n      _lib.callbackQueue.push({\n        callback: callback,\n        arguments: args,\n      });\n    },\n\n    /**\n       * Run promised functions in queue\n       */\n    runQueue() {\n      _lib.callbackQueue.forEach((element) => {\n        element.callback.apply(_lib, element.arguments);\n      });\n\n      // Empty queue\n      _lib.callbackQueue = [];\n    },\n\n    /**\n       * Set visible and run queue\n       */\n    setVisible() {\n      _lib.isVisible = true;\n      this.runQueue();\n    },\n\n    /**\n     * Lock text selection\n     * @param  {Object} lock - Lock (true) or unlock (false)\n     */\n    lockTextSelection(lock = true) {\n      if (lock) {\n        $('<style class=\"lock-text-selection-style\">').append('* {' +\n                  '-webkit-touch-callout: none;' +\n                  '-webkit-user-select: none;' +\n                  '-khtml-user-select: none;' +\n                  '-moz-user-select: none;' +\n                  '-ms-user-select: none;' +\n                  'user-select: none;' +\n              '}').appendTo('head');\n      } else {\n        $('style.lock-text-selection-style').remove();\n      }\n    },\n\n    /**\n     * Lock context menu\n     * @param {boolean} lock - Lock (true) or unlock (false)\n     */\n    lockContextMenu(lock = true) {\n      if (lock) {\n        $('body').attr('oncontextmenu', 'return false;');\n      } else {\n        $('body').removeAttr('oncontextmenu');\n      }\n    },\n\n    /**\n     * Lock pinch zoom\n     * @param {boolean} lock - Lock (true) or unlock (false)\n     */\n    lockPinchZoom(lock = true) {\n      const $viewPortEl = $('head > [name=\"viewport\"]');\n      if (lock) {\n        // Get original value\n        const originalValue = $viewPortEl.attr('content');\n\n        // Backup value as data\n        $viewPortEl.data('viewportValueBackup', originalValue);\n        $viewPortEl.attr('content',\n          originalValue + ' maximum-scale=1.0, user-scalable=no');\n      } else {\n        // Restore value\n        if ($viewPortEl.data('viewportValueBackup') != undefined) {\n          $viewPortEl.attr('content', $viewPortEl.data('viewportValueBackup'));\n        }\n      }\n    },\n\n    /**\n     * Lock all properties\n     * @param {boolean} lock - Lock (true) or unlock (false)\n     */\n    lockAllInteractions(lock = true) {\n      this.lockTextSelection(lock);\n      this.lockContextMenu(lock);\n      this.lockPinchZoom(lock);\n    },\n\n    /**\n     * Report fault on requested data\n     * @param {Object[]} [params] - Parameters\n     * @param {string} [params.code] - Fault code\n     * @param {string} [params.reason] - Fault reason\n     * @param {string} [params.key] - Optional key\n     * @param {Object[]} [options] - Request options\n     * @param {string} [options.targetId] - Target id\n     * @param {callback} [options.done]\n     * @param {callback} [options.error]\n     */\n    reportFault(\n      {code, reason, key} = {},\n      {targetId, done, error} = {}\n    ) {      // Get target id from the request option or from the global lib var\n      const id = (typeof targetId != 'undefined') ? targetId : _lib.targetId;\n      const reportKey = (typeof key != 'undefined') ? key : 'xiboIC_' + id;\n\n      if (typeof _lib.targetId == 'undefined' && typeof targetId != 'undefined') {\n        _lib.targetId = targetId;\n      }\n\n      console.log({_lib});\n\n      _lib.makeRequest(\n          '/fault',\n          {\n            type: 'POST',\n            data: {\n              code: code,\n              key: reportKey,\n              reason: reason,\n              ttl: 60,\n            },\n            done: done,\n            error: error,\n          },\n      );\n    },\n\n    /**\n     * Set global lib var/method\n     * @param {string} widgetId - Widget id\n     * @param {string} name - Name of the var/method\n     * @param {any} value - Value of the var/method\n     */\n    set(widgetId, name, value) {\n      if (typeof _lib[widgetId] == 'undefined') {\n        _lib[widgetId] = {};\n      }\n\n      _lib[widgetId][name] = value;\n    },\n\n    /**\n     * Get global lib var/method\n     * @param {string} widgetId - Widget id\n     * @param {string} name - Name of the var/method\n     * @return {any} Value of the var/method\n     */\n    get(widgetId, name) {\n      if (_lib[widgetId] && typeof _lib[widgetId][name] != 'undefined') {\n        return _lib[widgetId][name];\n      } else {\n        return undefined;\n      }\n    },\n\n    /**\n     * Call global lib method\n     * @param {string} widgetId - Widget id\n     * @param {string} name - Name of the method\n     * @param {any[]} args - Arguments of the method\n     * @return {any} Value of the method\n     */\n    call(widgetId, name, ...args) {\n      if (_lib[widgetId] && typeof _lib[widgetId][name] == 'function') {\n        return _lib[widgetId][name].apply(null, args);\n      }\n    },\n  };\n\n  // Check visibility on load\n  mainLib.checkVisible();\n\n  // Check if it's a preview\n  mainLib.checkIsPreview();\n\n  return mainLib;\n})();\n"],"sourceRoot":""}